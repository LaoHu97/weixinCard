{"version":3,"sources":["webpack:///./src/views/numberCard.vue?f1ef","webpack:///./src/views/numberCard.vue?e453","webpack:///src/views/numberCard.vue","webpack:///./src/views/numberCard.vue?3d69","webpack:///./src/views/numberCard.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_numberCard_vue_vue_type_style_index_0_id_fb9c21a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_numberCard_vue_vue_type_style_index_0_id_fb9c21a8_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","size","custom-class","mark","_v","width","height","round","src","cardDetails","avatarUrl","_s","coupon_name","surplus_total","type","on","click","useCardClick","color","title","finished","recordFinished","finished-text","load","recordOnLoad","model","value","callback","$$v","recordLoading","expression","_l","item","index","key","formatterTime","creat_time","tran_type","use_total","label","value-class","numDay","numWriteOff","confirm","qrCodeDialogConfirm","qrCodeShow","integer","disable-input","change","onStepperChange","stepperValue","bindtap","qrCodeUrl","mdCode","staticRenderFns","numberCardvue_type_script_lang_js_","data","pageNum","recordList","created","getNumberCardDetail","methods","e","Object","util","getQrCode","_this","$nextTick","_this2","para","mid","openid","card_id","$route","query","code","frequency","api","then","res","concat","encode","_this3","numPerPage","wdRFList","length","total","_this4","wdFreCard","views_numberCardvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"coupon/js/about.7d4d4755.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./numberCard.vue?vue&type=style&index=0&id=fb9c21a8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./numberCard.vue?vue&type=style&index=0&id=fb9c21a8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"card_view_top\"},[_c('div',{staticClass:\"card_view_top_top\"},[_c('van-tag',{attrs:{\"size\":\"large\",\"custom-class\":\"tag_custom\",\"mark\":\"\"}},[_vm._v(\"转赠\")])],1),_c('div',{staticClass:\"card_view_top_main\"},[_c('van-image',{staticClass:\"card_view_top_main_avatar\",attrs:{\"width\":\"80\",\"height\":\"80\",\"round\":\"\",\"src\":_vm.cardDetails.avatarUrl}}),_c('div',{staticClass:\"card_view_top_main_title\"},[_vm._v(_vm._s(_vm.cardDetails.coupon_name))]),_c('div',{staticClass:\"card_view_top_main_yue\"},[_vm._v(\"剩余：\"+_vm._s(_vm.cardDetails.surplus_total)+\"次\")]),_c('van-button',{attrs:{\"round\":\"\",\"type\":\"info\",\"size\":\"normal\"},on:{\"click\":_vm.useCardClick}},[_vm._v(\"立即使用\")])],1)]),_c('van-tabs',{attrs:{\"color\":\"#0081ff\"}},[_c('van-tab',{attrs:{\"title\":\"使用记录\"}},[_c('van-list',{attrs:{\"finished\":_vm.recordFinished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.recordOnLoad},model:{value:(_vm.recordLoading),callback:function ($$v) {_vm.recordLoading=$$v},expression:\"recordLoading\"}},_vm._l((_vm.recordList),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":_vm.formatterTime(item.creat_time),\"value\":item.tran_type === 'ADD' ? '增加' : '消费' + item.use_total + '次',\"label\":(\"剩余\" + (item.surplus_total) + \"次\"),\"value-class\":\"cell_value\"}})}),1)],1),_c('van-tab',{attrs:{\"title\":\"查看详情\"}},[_c('div',{staticClass:\"detail_card\"},[_vm._v(\"一天可以使用\"+_vm._s(_vm.cardDetails.numDay)+\"次\")]),_c('div',{staticClass:\"detail_card\"},[_vm._v(\"一次可以核销\"+_vm._s(_vm.cardDetails.numWriteOff)+\"次\")])])],1),_c('van-dialog',{on:{\"confirm\":_vm.qrCodeDialogConfirm},model:{value:(_vm.qrCodeShow),callback:function ($$v) {_vm.qrCodeShow=$$v},expression:\"qrCodeShow\"}},[_c('div',[_c('div',{staticClass:\"dialog_stepper\"},[_c('span',[_vm._v(\"使用次数：\")]),_c('van-stepper',{attrs:{\"integer\":\"\",\"disable-input\":\"\"},on:{\"change\":_vm.onStepperChange},model:{value:(_vm.stepperValue),callback:function ($$v) {_vm.stepperValue=$$v},expression:\"stepperValue\"}})],1)]),_c('div',{staticClass:\"dialog_img\",attrs:{\"bindtap\":\"bindTapQrCode\"}},[_c('van-image',{attrs:{\"src\":_vm.qrCodeUrl}})],1),_c('div',{staticClass:\"code_text\"},[_vm._v(\"Code码：\"+_vm._s(_vm.mdCode))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<style scoped>\n/* pages/cardListDetails/cardListDetails.wxss */\n.card_view_top {\n  height: 250px;\n  background: #fff;\n  border-radius: 10px;\n  margin: 10px;\n}\n.card_view_top_top {\n  height: 70px;\n  background: #0081ff;\n  border-top-left-radius: 10px;\n  border-top-right-radius: 10px;\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n}\n.van-tag--mark {\n  border-radius: 0.8em 0 0 0.8em!important;\n}\n.card_view_top_main {\n  height: 180px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n}\n.card_view_top_main_avatar {\n  margin-top: -50px;\n}\n.card_view_top_main_title {\n  font-size: 16px;\n  font-weight: bolder;\n}\n.cell_value {\n  color: #f44;\n}\n.dialog_stepper{\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 40px;\n  border: 1px solid #999;\n}\n.dialog_img{\n  width: 200px;\n  height: 200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n.dialog_img image {\n  width: 100%;\n  height: 100%;\n}\n.detail_card{\n  padding: 10px;\n  background: #fff;\n}\n.code_text{\n  text-align: center;\n  margin-bottom: 10px;\n}\n</style>\n\n<template>\n  <div>\n    <div class=\"card_view_top\">\n      <div class=\"card_view_top_top\">\n        <van-tag size=\"large\" custom-class=\"tag_custom\" mark>转赠</van-tag>\n      </div>\n      <div class=\"card_view_top_main\">\n        <van-image\n          width=\"80\"\n          height=\"80\"\n          round\n          class=\"card_view_top_main_avatar\"\n          :src=\"cardDetails.avatarUrl\"\n        />\n        <div class=\"card_view_top_main_title\">{{cardDetails.coupon_name}}</div>\n        <div class=\"card_view_top_main_yue\">剩余：{{cardDetails.surplus_total}}次</div>\n        <van-button round type=\"info\" size=\"normal\" @click=\"useCardClick\">立即使用</van-button>\n      </div>\n    </div>\n    <van-tabs color=\"#0081ff\">\n      <van-tab title=\"使用记录\">\n        <van-list\n          v-model=\"recordLoading\"\n          :finished=\"recordFinished\"\n          finished-text=\"没有更多了\"\n          @load=\"recordOnLoad\"\n        >\n          <van-cell v-for=\"(item, index) in recordList\" v-bind:key=\"index\" :title=\"formatterTime(item.creat_time)\" :value=\"item.tran_type === 'ADD' ? '增加' : '消费' + item.use_total + '次'\" :label=\"`剩余${item.surplus_total}次`\" value-class=\"cell_value\" />\n        </van-list>\n      </van-tab>\n      <van-tab title=\"查看详情\">\n        <div class=\"detail_card\">一天可以使用{{cardDetails.numDay}}次</div>\n        <div class=\"detail_card\">一次可以核销{{cardDetails.numWriteOff}}次</div>\n      </van-tab>\n    </van-tabs>\n    <van-dialog\n      v-model=\"qrCodeShow\"\n      @confirm=\"qrCodeDialogConfirm\"\n    >\n      <div>\n        <div class=\"dialog_stepper\">\n          <span>使用次数：</span>\n          <van-stepper v-model=\"stepperValue\" integer disable-input @change=\"onStepperChange\" />\n        </div>\n      </div>\n      <div class=\"dialog_img\" bindtap=\"bindTapQrCode\">\n        <van-image :src=\"qrCodeUrl\"/>\n      </div>\n      <div class='code_text'>Code码：{{mdCode}}</div>\n    </van-dialog>\n  </div>\n</template>\n<script>\n// @ is an alias to /src\nimport { queryFrequencyDetail, queryFreTransList, generateQRCode } from \"@/api/index\";\nimport { parseTime, getQueryString } from \"@/utils/util\"\n\nexport default {\n  data() {\n    return {\n      cardDetails: {\n        avatarUrl: ''\n      },\n\n      pageNum: 1,\n      recordList: [],\n      recordLoading: false,\n      recordFinished: false,\n\n      qrCodeShow: false,\n      stepperValue: 1,\n      qrCodeUrl: '',\n      mdCode: ''\n    };\n  },\n  created() {\n    this.getNumberCardDetail();\n  },\n  methods: {\n    formatterTime(e){\n      return parseTime(e)\n    },\n    qrCodeDialogConfirm() {\n      this.pageNum = 1;\n      this.recordList = []\n      this.recordOnLoad()\n      this.getNumberCardDetail()\n    },\n    onStepperChange() {\n      this.getQrCode()\n    },\n    useCardClick() {\n      this.qrCodeShow = true\n      this.$nextTick(() => {\n        this.stepperValue = 1\n        this.getQrCode()\n      })\n    },\n    getQrCode(){\n      let para = {\n        mid: getQueryString('mid'),\n        openid: getQueryString('openid'),\n        card_id: this.$route.query.card_id,\n        code: this.$route.query.code,\n        frequency: this.stepperValue\n      };\n      generateQRCode(para).then(res => {\n      this.qrCodeUrl= `data:image/jpeg;base64,${res.data.encode}`\n      this.mdCode= res.data.mdCode\n      })\n    },\n    recordOnLoad() {\n      let para = {\n        mid: getQueryString('mid'),\n        openid: getQueryString('openid'),\n        card_id: this.$route.query.card_id,\n        code: this.$route.query.code,\n        pageNum: this.pageNum,\n        numPerPage: 10\n      };\n      queryFreTransList(para).then(res => {\n        this.recordList = this.recordList.concat(res.data.wdRFList);\n        if (this.recordList.length === res.data.total) {\n          this.recordFinished = true;\n        }\n        this.pageNum += 1;\n        this.recordLoading = false;\n      });\n    },\n    getNumberCardDetail() {\n      let para = {\n        openid: getQueryString('openid'),\n        card_id: this.$route.query.card_id,\n        code: this.$route.query.code\n      };\n      queryFrequencyDetail(para).then(res => {\n        this.cardDetails = res.data.wdFreCard;\n      });\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./numberCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./numberCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./numberCard.vue?vue&type=template&id=fb9c21a8&scoped=true&\"\nimport script from \"./numberCard.vue?vue&type=script&lang=js&\"\nexport * from \"./numberCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./numberCard.vue?vue&type=style&index=0&id=fb9c21a8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fb9c21a8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}